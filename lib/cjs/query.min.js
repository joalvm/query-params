"use strict";module.exports=class{constructor(t,e=""){this.parameters=t,this.url=e,this.encode=!1}serialize(t=!1){return this.encode=t,this.concat(Object.entries(this.flatten(this.parameters)).map(this.handleEncode.bind(this)).join("&"))}concat(t){return this.url?this.url.replace(/\/$/,"")+"?"+t:t}handleEncode(t){return(this.encode?t.map(encodeURIComponent):t).join("=")}flatten(t,e,r){if(void 0===r){var n=Object.prototype.toString.call(t);if("[object Object]"===n)r={};else{if("[object Array]"!==n)return{};r=[]}}for(var o in t)if(t.hasOwnProperty(o)&&t[o])switch(Object.prototype.toString.call(t[o])){case"[object Array]":case"[object Object]":this.flatten(t[o],this.join(o,e),r);break;default:r[this.join(o,e)]=this.encode?t[o]:encodeURIComponent(t[o])}return r}join(t,e){return e?`${e}[${t}]`:t}};